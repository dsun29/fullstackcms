{"version":3,"sources":["app/components/IndexComponent.jsx"],"names":["IndexComponent","props","onSearch","bind","console","log","loadSavedStates","queryParams","prevProps","installing","startInstallation","front","t","k","condition","keywords","loadPosts","refs","keywordsInput","value","undefined","trim","length","search","posts","map","post","_id","Date","lastmodified","getDate","locale","month_names_short","getMonth","author","name","title","frontpagephoto","__html","abstract","Component"],"mappings":"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","file":"IndexComponent.jsx","sourceRoot":"/home/ubuntu/workspace","sourcesContent":["import React from 'react';\nimport {Col, FormGroup, InputGroup, FormControl, Glyphicon } from 'react-bootstrap'\nimport Layout from './Layout'\nimport { Link } from 'react-router';\nimport locale from '../../share/util/locale'\nimport global_config from '../../share/global_config'\n\nexport default class IndexComponent extends React.Component {\n    \n    constructor(props){\n        super(props);\n        this.props = props;\n\n        this.onSearch = this.onSearch.bind(this);\n        \n        console.log('IndexComponent constructor');\n    }\n    \n    componentWillMount() {\n        \n        console.log('IndexComponent componentWillMount');\n        \n        this.props.loadSavedStates(this.props.queryParams);\n        \n    }\n    \n\n    \n    componentDidUpdate (prevProps) {\n        \n        console.log('IndexComponent componentDidUpdate');\n        \n        if (this.props.installing === true && prevProps.installing !== true) {\n            this.props.startInstallation();\n            \n            return;\n        }\n        \n        \n        if ((this.props.queryParams.front !== prevProps.queryParams.front \n            || this.props.queryParams.t !== prevProps.queryParams.t \n            || this.props.queryParams.k !== prevProps.queryParams.k) && this.props.installing !== true) {\n            \n            console.log('params in didUpdate', this.props.queryParams);\n            let queryParams = this.props.queryParams;\n            let condition = {front: 'y'};\n            if(queryParams.t != null && queryParams.t != ''){\n                condition.keywords = queryParams.t;\n            }\n            if(queryParams.k != null && queryParams.k != ''){\n                condition.keywords = queryParams.k;\n            }\n            \n            this.props.loadPosts(condition);\n        }\n        \n\n    }\n  \n    \n    onSearch(){\n        let keywords = this.refs.keywordsInput.value;\n    \tif(keywords === null || keywords === undefined){\n\t\t\treturn false;\n\t\t}\n\t\tkeywords = keywords.trim();\n\t\tif(keywords.length < 2){\n\t\t    return false;\n\t\t}\n        this.props.search(keywords);\n    }\n  \n    render() {\n        return (\n            <Layout>\n                \n                    <Col md={9}>\n                    \n                        {this.props.posts.map(post =>\n                        \n                            <div className=\"row post-row\" key={post._id}>\n                                <div className=\"meta col-md-2 col-sm-3 col-xs-12 text-right\">\n                                    <ul className=\"meta-list list-unstyled\">\n                                        <li className=\"post-time post_date date updated\">\n                                            <span className=\"date\">{new Date(post.lastmodified).getDate()}</span>\n                                            <span className=\"month\">{locale[global_config.locale].month_names_short[new Date(post.lastmodified).getMonth()]}</span>\n                                        </li>\n                                        <li className=\"post-author\"><a href=\"#\">{post.author.name}</a></li>\n                                        <li className=\"post-comments-link\">\n                                        Comments: <a href=\"/post/first-angular2-project#comment-area\">0</a>\n                                        </li>\n                                    </ul>\n                                </div>\n                                \n                                <div className=\"content-wrapper col-md-9 col-sm-9 col-xs-12\">\n                                    <h3 className=\"post-title\">\n                                        <Link to={'/post2/' + post._id}>{post.title}</Link>\n                                    </h3>\n                                    \n                                    {post.frontpagephoto ? <img className=\"frontpagephoto\" src={'/' + post.frontpagephoto} /> : null}\n                                \n                                    <div className=\"content\">\n                                        <p dangerouslySetInnerHTML={{__html: post.abstract}}></p>\n                                        <Link to={'/post2/' + post._id}>Read more <i className=\"fa fa-long-arrow-right\"></i></Link>\n                                    </div>\n                                </div>\n                                \n                                \n                            </div>    \n                        )}\n                    \n\n                    </Col>\n                    \n                    <Col md={3}>\n                    \n                        <FormGroup>\n                            <InputGroup>\n                                <input className=\"form-control\"\n                                    type=\"text\" \n                                    defaultValue={this.props.queryParams.k}\n                                    ref=\"keywordsInput\"\n                                />\n                                <InputGroup.Addon onClick={()=>this.onSearch()}>\n                                    <Glyphicon glyph=\"search\" />\n                                </InputGroup.Addon>\n                            </InputGroup>\n                        </FormGroup>\n                    </Col>\n                \n            </Layout>\n        );\n    }\n}\n"]}